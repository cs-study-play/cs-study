# 정규화(Nomalization)

## 정규화(Nomalization)이란?

정규화의 기본 목표는 테이블 간에 중복된 데이터를 허용하지 않는다는 것이다. 중복된 데이터를 허용하지 않음으로써 무결성(Integrity)를 유지할 수 있으며, DB의 저장 용량 역시 줄일 수 있다.

테이블을 분해하는 정규화 단계가 정의되어 있고, 여기서 테이블을 어떻게 분해하는지에 따라 정규화 단계가 달라진다.

## 무결성

- 데이터의 무결성은 데이터의 정확성, 일관성, 유효성이 유지되는 것
- 데이터의 무결성을 유지하는 것이 데이터베이스 관리시스템(RDBMS)의 주요 기능
- 종류에는 개체 무결성, 참조 무결성, 도메인 무결성, 무결성 규칙이 있다.

## 키의 종류와 기능

- 유일성
    
    : 하나의 키값으로 튜플을 유일하게 식별할 수 있는 성질
    
    - 각각의 튜플은 유일해야 한다. 이름, 나이, 혈액형 등은 중복될 수 있지만 주민번호는 중복될 수 없다. 이렇게 각각의 튜플을 구분할 수 있는 성질을 의미.
- 최소성
    
    : 키를 구성하는 속성들 중 꼭 필요한 최소한의 속성들로만 키를 구성하는 성질
    
    - 굳이 없어도 될 속성을 넣지 말라는 의미. 키(주민번호, 이름, 나이)가 있다면 굳이 이름과 나이가 없어도 주민번호로 충분히 튜플을 유일하게 식별할 수 있다. 주민번호 자체는 최소성을 만족한다.
    
![img1 daumcdn](https://user-images.githubusercontent.com/97663140/161429854-24f14b37-2f8c-4532-8d32-f7276eef3c0a.png)
    
1. **슈퍼 키(Super key)**
    
    유일성은 만족하지만, 최소성은 만족하지 못하는 키
    
2. **후보 키(Candidate key)**
    
    Tuple을 유일하게 식별하기 위해 사용하는 속성들의 부분 집합.
    
    (기본키로 사용할 수 있는 속성)
    
3. **기본 키 (Primary key)**
    
    후보키 중 선택한 main Key
    
    - Null 값을 가질 수 없음
    - 동일한 값이 중복될 수 없음
4. **대체 키(Alternate key)**
    - 후보키 중 기본키를 제외한 나머지 키 = 보조키
5. **복합 키(Composite key)**
6. **외래 키(Foreign key)**
    
    다른 릴레이션의 기본키를 그대로 참조하는 속성의 집합
    

## 제1 정규화

제1 정규화란 테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해하는 것이다. 

| 동물 | 좋아하는 것 |
| --- | --- |
| 강아지 | 산책, 고구마 |
| 고양이 | 놀이, 츄르 |
| 햄스터 | 밀웜 |

| 동물 | 좋아하는 것 |
| --- | --- |
| 강아지 | 고구마 |
| 고양이 | 츄르 |
| 햄스터 | 밀웜 |

데이터가 1:1의 관계를 형성해야 제 1정규형을 만족할 수 있다.

## 제2 정규화

제2 정규화란 제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것이다. 완전 함수 종속이란 기본키의 부분집함이 결정자가 되어서는 안된다는 것을 의미한다. 

| 학번 | 강좌이름 | 강의실 | 성적 |
| --- | --- | --- | --- |
| 1 | 기초통계학 | 소회의실 1 | 4.5 |
| 2 | 재무관리 | 소회의실 2 | 4.0 |
| 3 | 헌법 | 소회의실 3 | 3.5 |
| 4 | 회귀분석 | 소회의실 3 | 2.5 |

이 테이블에서 기본키는 (학생번호, 강좌이름)으로 복합키이다. 그리고 (학생정보, 강좌 이름)인 기본키는 성적을 결정하고 있다.

하지만 여기서 강의실이라는 컬럼은 기본키의 부분집합인 강좌이름에 의해 결정될 수 있다.

즉, 기본키의 부분키인 강좌이름이 결정자이기 때문에 기존의 테이블에서 강의실을 분해하여 별도의 테이블로 관리하여 제2 정규형을 만족시킬 수 있다. 

| 학번 | 강좌이름 | 성적 |
| --- | --- | --- |
| 1 | 기초통계학 | 4.5 |
| 2 | 재무관리 | 4.0 |
| 3 | 회귀분석 | 3.5 |
| 4 | 회귀분석 | 2.5 |

| 강좌이름 | 강의실 |
| --- | --- |
| 기초통계학 | 소회의실 1 |
| 재무관리 | 소회의실 2 |
| 회귀분석 | 소회의실 3 |

## 제3 정규화

제 3 정규화란 제2 정규화를 진행한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것이다. 여기서 이행적 종속이라는 것은 A→B,B→C 가 성립할 때 A→C가 성립되는 것을 의미한다. 

![Untitled](https://user-images.githubusercontent.com/97663140/161429856-98b8d072-dc34-41d7-9e43-c13f68f367c5.png)

- 기존의 테이블에서 학생 번호는 강좌 이름을 결정
- 강죄 이름은 수강료를 결정

⇒ 따라서 (학생 번호, 강좌 이름) 테이블과 (강좌 이름, 수강료)테이블로 분해해야 한다. 

- 이행적 종속을 왜 없애야 하는가?

한 명의 학생이 수강하는 강좌가 변경되었다고 가정했을 때, 수강료도 같이 수정해야하는 번거로움을 없앨 수 있다. 

출처

[https://mangkyu.tistory.com/110](https://mangkyu.tistory.com/110)

[https://untitledtblog.tistory.com/123](https://untitledtblog.tistory.com/123)

[https://gyoogle.dev/blog/computer-science/data-base/Key.html](https://gyoogle.dev/blog/computer-science/data-base/Key.html)

https://kosaf04pyh.tistory.com/201